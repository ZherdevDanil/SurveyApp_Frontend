<h2>Створення опитування</h2>

<form (ngSubmit)="submit()">
  <label>Назва:
    <input [(ngModel)]="title" name="title" required />
  </label>

  <label>
    <input type="checkbox" [(ngModel)]="requireAuth" name="requireAuth" />
    Анонімне опитування
  </label>
  <label>
    <input type="checkbox" [(ngModel)]="isPublic" name="isPublic" />
    Публічне опитування
  </label>
  <div class="form-group">
    <label for="description">Опис опитування</label><br>
    <textarea id="description" [(ngModel)]="description" name="description" class="form-control"></textarea>
  </div>
  <!--<label>Початок активності:
    <input
      type="datetime-local"
      [(ngModel)]="activeFrom"
      name="activeFrom" />
  </label>

  <label>Кінець активності:
    <input
      type="datetime-local"
      [(ngModel)]="activeUntil"
      name="activeUntil" />
  </label>-->

  <label>
  Початок активності:
  <input
    type="date"
    [(ngModel)]="activeFromDate"
    name="activeFromDate"
    required
    class="form-control d-inline-block w-auto"
  />
  <input
    type="time"
    [(ngModel)]="activeFromTime"
    name="activeFromTime"
    required
    class="form-control d-inline-block w-auto ms-2"
  />
</label>
<label>
  Кінець активності:
  <input
    type="date"
    [(ngModel)]="activeUntilDate"
    name="activeUntilDate"
    required
    class="form-control d-inline-block w-auto"
  />
  <input
    type="time"
    [(ngModel)]="activeUntilTime"
    name="activeUntilTime"
    required
    class="form-control d-inline-block w-auto ms-2"
  />
</label>


  <div *ngFor="let q of questions; let i = index">
    <h4>Питання {{ i + 1 }}</h4>
    <input [(ngModel)]="q.text" name="text{{i}}" required placeholder="Текст питання" />

    <select [(ngModel)]="q.type" name="type{{i}}">
      <option value="TEXT">Текстове</option>
      <option value="SINGLE_CHOICE">Один варіант</option>
      <option value="MULTIPLE_CHOICE">Кілька варіантів</option>
    </select>

    <div *ngIf="q.type !== 'TEXT'">
      <div *ngFor="let opt of q.options; let j = index">
        <input [(ngModel)]="q.options![j].text" name="option{{i}}-{{j}}" placeholder="Варіант відповіді" />
        <button type="button" (click)="removeOption(i, j)">Видалити варіант</button>
      </div>
      <button type="button" (click)="addOption(i)">Додати варіант</button>
    </div>

    <button type="button" (click)="removeQuestion(i)">Видалити питання</button>
    <hr />
  </div>

  <button type="button" (click)="addQuestion()">Додати питання</button>
  <button type="submit">Створити</button>
</form>

